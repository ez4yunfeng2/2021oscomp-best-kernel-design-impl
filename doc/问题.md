## 问题

#### GetTime

该方法直接使用riscv库中的read scr的宏定义，将0XC01对应的寄存器读出，其代码为：

> ​         llvm_asm!("csrrs $0, $1, x0" : "=r"(r) : "i"($csr_number) :: "volatile");

它由编译器选择合适的寄存器，读出时钟CSR并赋值给usize变量r。最后优化出来的指令为

> rdtime $0

这里的$0由编译器决定，这样做表面上没有问题。但是实际上，K210的CSR读写指令的rd寄存器不能是所有寄存器，它只支持a0-a7以及s0-s6作为rd。这样的话我们就必须选定好对应的寄存器，而不能由编译器选定。因此我们将其改为

> asm!(
>
> ​      "rdtime a0",
>
> ​      inout("a0") time
>
> ​    );

读取time作为时间。


#### BusyBox运行

##### 现象

0xf2e8地址处，pc跳转到0，出发指令异常。

> 0xf2d8:      jalr    t1,t3
>
> 0xf2dc:      nop
>
> 0xf2e0:      auipc   t3,0xe8
>
> 0xf2e4:      ld      t3,2024(t3)
>
> 0xf2e8:      jalr    t1,t3

#### 目前发现

在程序运行至结束，没有任何系统调用发生。这强烈暗示着，exec程序出现了问题。

尝试在exec busybox的时候加入参数，发生错误的地址（0xf2e8）不变。

存储有跳转地址的内存2024(t3)的数据一直为0.这个地址为f72e0+7e8=F7AC8